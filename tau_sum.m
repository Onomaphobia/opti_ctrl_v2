function[tau_sum] = tau_sum(theta1,theta2,theta3,theta1d,theta2d,theta3d,theta1dd,theta2dd,theta3dd,g)

%no external force
%tau_sum = (4278*theta1dd + 4278*theta2dd + 676*theta3dd - 1350*theta3^2*sin(theta3) + 4500*theta1d^2*sin(theta2) - 150*g*cos(theta1 + theta2) + 1350*theta1dd*cos(theta2 + theta3) + 4500*theta1dd*cos(theta2) + 2700*theta1dd*cos(theta3) + 2700*theta2dd*cos(theta3) + 1350*theta3dd*cos(theta3) - 45*g*cos(theta1 + theta2 + theta3) + 1350*theta1d^2*sin(theta2 + theta3) - 2700*theta3*theta1d*sin(theta3) - 2700*theta3*theta2d*sin(theta3))^2 + (676*theta1dd + 676*theta2dd + 676*theta3dd + 1350*theta1d^2*sin(theta3) + 1350*theta2d^2*sin(theta3) + 1350*theta1dd*cos(theta2 + theta3) + 1350*theta1dd*cos(theta3) + 1350*theta2dd*cos(theta3) - 45*g*cos(theta1 + theta2 + theta3) + 1350*theta1d^2*sin(theta2 + theta3) + 2700*theta1d*theta2d*sin(theta3))^2 + (1350*theta3^2*sin(theta3) - 4278*theta2dd - 676*theta3dd - 11706*theta1dd + 4500*theta2d^2*sin(theta2) + 150*g*cos(theta1 + theta2) - 2700*theta1dd*cos(theta2 + theta3) - 1350*theta2dd*cos(theta2 + theta3) - 1350*theta3dd*cos(theta2 + theta3) + 285*g*cos(theta1) - 9000*theta1dd*cos(theta2) - 2700*theta1dd*cos(theta3) - 4500*theta2dd*cos(theta2) - 2700*theta2dd*cos(theta3) - 1350*theta3dd*cos(theta3) + 45*g*cos(theta1 + theta2 + theta3) + 1350*theta3^2*sin(theta2 + theta3) + 1350*theta2d^2*sin(theta2 + theta3) + 2700*theta3*theta1d*sin(theta2 + theta3) + 2700*theta3*theta2d*sin(theta2 + theta3) + 2700*theta1d*theta2d*sin(theta2 + theta3) + 2700*theta3*theta1d*sin(theta3) + 2700*theta3*theta2d*sin(theta3) + 9000*theta1d*theta2d*sin(theta2))^2;

%external force = (0,-10,0)
tau_sum = (676*theta1dd + 676*theta2dd + 676*theta3dd + 1350*theta1d^2*sin(theta3) + 1350*theta2d^2*sin(theta3) + 1350*theta1dd*cos(theta2 + theta3) + 1350*theta1dd*cos(theta3) + 1350*theta2dd*cos(theta3) - 45*g*cos(theta1 + theta2 + theta3) + 1350*theta1d^2*sin(theta2 + theta3) + 2700*theta1d*theta2d*sin(theta3) - 300)^2 + (4278*theta1dd + 4278*theta2dd + 676*theta3dd - 300*cos(theta3) - 1350*theta3^2*sin(theta3) + 4500*theta1d^2*sin(theta2) - 150*g*cos(theta1 + theta2) + 1350*theta1dd*cos(theta2 + theta3) + 4500*theta1dd*cos(theta2) + 2700*theta1dd*cos(theta3) + 2700*theta2dd*cos(theta3) + 1350*theta3dd*cos(theta3) - 45*g*cos(theta1 + theta2 + theta3) + 1350*theta1d^2*sin(theta2 + theta3) - 2700*theta3*theta1d*sin(theta3) - 2700*theta3*theta2d*sin(theta3) - 300)^2 + (300*cos(theta2 + theta3) - 4278*theta2dd - 676*theta3dd - 11706*theta1dd + 300*cos(theta3) + 1350*theta3^2*sin(theta3) + 4500*theta2d^2*sin(theta2) + 150*g*cos(theta1 + theta2) - 2700*theta1dd*cos(theta2 + theta3) - 1350*theta2dd*cos(theta2 + theta3) - 1350*theta3dd*cos(theta2 + theta3) + 285*g*cos(theta1) - 9000*theta1dd*cos(theta2) - 2700*theta1dd*cos(theta3) - 4500*theta2dd*cos(theta2) - 2700*theta2dd*cos(theta3) - 1350*theta3dd*cos(theta3) + 45*g*cos(theta1 + theta2 + theta3) + 1350*theta3^2*sin(theta2 + theta3) + 1350*theta2d^2*sin(theta2 + theta3) + 2700*theta3*theta1d*sin(theta2 + theta3) + 2700*theta3*theta2d*sin(theta2 + theta3) + 2700*theta1d*theta2d*sin(theta2 + theta3) + 2700*theta3*theta1d*sin(theta3) + 2700*theta3*theta2d*sin(theta3) + 9000*theta1d*theta2d*sin(theta2) + 300)^2;
 